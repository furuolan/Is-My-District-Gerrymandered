doctype html
html(lang = "en")
  head
    meta(charset = "utf-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="viewport" content="width=device-width, initial-scale=1")
    meta(name = "description" content = "Is my district gerrymandered?")
    meta(name = "author" content = "Jeffrey Shen")

    title Is my district gerrymandered? | #{district_data.state}-#{district_data.district}
    
    link(href = "/bower_components/font-awesome/css/font-awesome.min.css" rel = "stylesheet" type = "text/css") 
    link(href = "/dist/CSS/district.css" rel = "stylesheet" type = "text/css")
    script(src = "/bower_components/jquery/dist/jquery.min.js")
    script(src = "http://d3js.org/d3.v3.min.js")
    script(src = "/dist/JS/district-min.js")
  
  body(lang = "en")
    #wrapper
      center
        
        img#svg.svg(src = "/data/svgs/" + district_data.state + "_" + district_data.district + ".svg")
        br
        br
        h1 #{district_data.district_name}
        br
        p.subtitle Most likely <strong>NOT</strong> gerrymandered (Gerrymandering level: <strong>3/100</strong>). 
        a(href = "/about") See how we get this score
        br 
        br 
        p 
          i.fa.fa-fw.fa-square-o 
          | Compact
          i.fa.fa-fw.fa-square-o 
          | Minimal Voter Wastage
          if district_data.redistricting_control === "Independent"
            i.fa.fa-fw.fa-check-square-o 
          else 
            i.fa.fa-fw.fa-square-o 
          | Split Redistricting Control
        br
        ul 
          -var statePercent = (100.0 * (district_data.compactness.absolute - district_data.compactness.state) / district_data.compactness.state).toFixed(1)
          -var countryPercent = (100.0 * (district_data.compactness.absolute - district_data.compactness.country) / district_data.compactness.country).toFixed(1)
          li 1st most gerrymandered district (15% more than state average, 10% more than country average)
          li= district_data.compactness.rank + " most compact district (out of 435 districts) (" + (statePercent > 0 ? statePercent + "% more" : -1 * statePercent + "% less") + " compact than state average, " + (countryPercent > 0 ? countryPercent + "% more" : countryPercent * -1 + "% less") + " compact than country average)."
          
          - var efficiency_percent = (parseFloat(district_data.efficiency_gap.substring(1)) * 100.0).toFixed(1)
          - var efficiency_favors = district_data.efficiency_gap.substring(0, 1);
          li!= (efficiency_percent < 7 ? "Allowable" : "Unacceptably large ") + efficiency_percent + "% efficiency favoring " + (efficiency_favors === "R" ? "<em class = 'red'>Republicans</em>" : "<em>Democrats</em>") + " (a.k.a " + (efficiency_favors !== "R" ? "Republicans" : "Democrats") + " waste more votes in " + district_data.state_name  + "). An efficiency gap below 7% is considered acceptable." 
          if district_data.redistricting_control === "Democrat" 
            li <em>Democrat</em> redistricting control
          else if district_data.redistricting_control === "Republican" 
            li <em class = "red">Republican</em> redistricting control  
          else 
            li <strong>Split</strong> redistricting control
            
          if district_data.affiliation === "Republican"
            li <em class = "red">Representative:</em> #{district_data.rep} (R)
          else if district_data.affiliation === "Democrat"
            li <em>Representative:</em> #{district_data.rep} (D)
            
          if district_data.state_affiliation === "Republican"
            li <em class = "red">Republican</em> State
          else if district_data.state_affiliation === "Democrat"
            li <em>Democrat</em> State
    footer
      .left
        if district_data.previous_district != null
          a(href = "/district/" + district_data.previous_district)
            i.fa.fa-fw.fa-chevron-left
            | #{district_data.previous_district}
        else
          a.hidden() text 
      .center
        a(href = "/") Go back home
      .right
        if district_data.next_district != null
          a(href = "/district/" + district_data.next_district)
            i.fa.fa-fw.fa-chevron-right
            | #{district_data.next_district}
        else
          a.hidden() text 
    
